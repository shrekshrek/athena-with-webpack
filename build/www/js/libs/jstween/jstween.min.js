/*!
 * VERSION: 0.1.0
 * DATE: 2015-07-09
 * GIT:https://github.com/shrekshrek/jstween
 *
 * @author: Shrek.wang, shrekshrek@gmail.com
 **/

!function(){if("performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var t=Date.now();window.performance.now=function(){return Date.now()-t}}}(),function(t){var n="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;"function"==typeof define&&define.amd?define(["exports"],function(r){n.JT=t(n,r)}):"undefined"!=typeof exports?t(n,exports):n.JT=t(n,{})}(function(t,n){function r(t,n){if(void 0===t.length)n.call(t,0,t);else for(var r=0;r<t.length;r++)n.call(t[r],r,t[r])}function e(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function i(t){return t.replace(/\b(\w)|\s(\w)/g,function(t){return t.toUpperCase()})}function a(t){return t?T+i(t):T}function o(t){if(!t)throw"target is undefined, can't tween!!!";return"string"==typeof t?"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t):t}function u(t,n){return void 0!==t.style[n]?n:(n=a(n),void 0!==t.style[n]?n:null)}function s(t,n){return"string"==typeof n?t+parseFloat(n):"number"==typeof n?n:void 0}function f(t,n){if(t.style[n])return t.style[n];if(document.defaultView&&document.defaultView.getComputedStyle){var r=e(n),i=document.defaultView.getComputedStyle(t,"");return i&&i.getPropertyValue(r)}return t.currentStyle?t.currentStyle[n]:null}function l(t,n){for(var r in n)t.style[r]=h(r,n[r])}function h(t,n){for(var r in M)if(t===M[r])return n;return"number"==typeof n?n+"px":n}function c(t){return void 0!==t.style}function v(){E=!0;var t=P.length;if(0===t)return void(E=!1);for(var n=window.performance.now(),r=t-1;r>=0;r--)if(!P[r].update(n)){var e=P.splice(r,1)[0];e.onEnd&&e.onEnd.apply(e.target,e.onEndParams),e.target=null}I(v)}function m(){this.init.apply(this,arguments)}function p(t,n){var e=o(t),i=P.length;r(e,function(t,r){for(var e=i-1;e>=0;e--){var a=P[e];a.target===r&&a[n]()}})}function d(t){for(var n=P.length,r=n-1;r>=0;r--){var e=P[r];e[t]()}}var g=t.JT;n.VERSION="0.1.0",n.noConflict=function(){return t.JT=g,this};var w=function(t){var n=arguments.length;if(2>n||null==t)return t;for(var r=1;n>r;r++)for(var e=arguments[r],i=y(e),a=i.length,o=0;a>o;o++){var u=i[o];t[u]=e[u]}return t},y=function(t){var n=[];for(var r in t)n.push(r);return n},I=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},T="";!function(){var t=["webkit","moz","ms","o"],n=document.createElement("div");for(var r in t)if(t[r]+"Transform"in n.style){T=t[r];break}}(),n.requestAnimationFrame=I;var M=["fontWeight","lineHeight","opacity","zoom"],P=[],E=!1;return w(m.prototype,{init:function(t,r,e,i,a){this.fromVars=e,this.toVars=i,this.target=t,this.duration=1e3*r,this.ease=i.ease||n.Linear.None,this.repeat=i.repeat||1,this.yoyo=i.yoyo||!1,this.delay=1e3*(i.delay||0),this.onStart=i.onStart||null,this.onStartParams=i.onStartParams||[],this.onIteration=i.onIteration||null,this.onIterationParams=i.onIterationParams||[],this.onEnd=i.onEnd||null,this.onEndParams=i.onEndParams||[],this.onUpdate=i.onUpdate||null,this.onUpdateParams=i.onUpdateParams||[],this.isPlaying=i.isPlaying||!0,this.isReverse=!1,this.isDom=a,this.curTime=0,this.lastTime=window.performance.now(),this.isStart=!1,this.startTime=this.delay,this.endTime=this.startTime+this.duration,this.restart(),P.unshift(this),E||v()},update:function(t){var n=t-this.lastTime;if(this.lastTime=t,!this.isPlaying)return!0;if(this.curTime+=n,this.curTime<this.startTime)return!0;this.isStart||(this.isStart=!0,this.onStart&&this.onStart.apply(this.target,this.onStartParams));var r=(this.curTime-this.startTime)/this.duration;r=r>1?1:r,this.isReverse&&(r=1-r);var e=parseFloat(this.ease(r));for(var i in this.fromVars){var a=this.fromVars[i],o=this.toVars[i]||0,u=a+(o-a)*e;this.isDom?this.target.style[i]=h(i,u):this.target[i]=u}if(this.onUpdate&&this.onUpdate.apply(this.target,this.onUpdateParams),this.curTime>=this.endTime){if(1==this.repeat)return!1;this.repeat>1&&(this.onIteration&&this.onIteration.apply(this.target,this.onIterationParams),this.repeat--),this.curTime=this.startTime,this.yoyo&&(this.isReverse=!this.isReverse)}return!0},play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},restart:function(){this.curTime=0;for(var t in this.fromVars){var n=this.fromVars[t];this.isDom?this.target.style[t]=h(t,n):this.target[t]=n}},reverse:function(){this.curTime=this.endTime-this.curTime+this.startTime,this.isReverse=!this.isReverse},kill:function(t){var n=P.indexOf(this);if(-1!==n)if(t){var r=P.splice(n,1)[0];r.update(r.endTime-r.curTime+r.lastTime),r.onEnd&&r.onEnd.apply(r.target,r.onEndParams),r.target=null}else{var r=P.splice(n,1)[0];r.update(window.performance.now()),r.target=null}}}),w(n,{get:function(t,n){var r=o(t);if(void 0!==r.length&&(r=r[0]),c(r)){var e=u(r,n);return e?f(r,e):null}return r[n]},set:function(t,n){var e=o(t);r(e,function(t,r){if(c(r)){var e={};for(var i in n){var a=u(r,i);a&&(e[a]=n[i])}l(r,e)}else for(var i in n)r[i]=n[i]})},fromTo:function(t,n,e,i){var a=o(t),u=[];return r(a,function(t,r){var a={},o={},l=c(r);for(var h in i)if(l?void 0!==r.style[h]:void 0!==r[h]){var v=parseFloat(l?f(r,h):r[h]);a[h]=s(v,e[h]),o[h]=s(v,i[h])}else o[h]=i[h];var p=new m(r,n,a,o,l);u.push(p)}),1==u.length?u[0]:u},from:function(t,n,e){var i=o(t),a=[];return r(i,function(t,r){var i={},o={},u=c(r);for(var l in e)if(u?void 0!==r.style[l]:void 0!==r[l]){var h=parseFloat(u?f(r,l):r[l]);o[l]=h,i[l]=s(h,e[l])}else o[l]=e[l];var v=new m(r,n,i,o,u);a.push(v)}),1==a.length?a[0]:a},to:function(t,n,e){var i=o(t),a=[];return r(i,function(t,r){var i={},o={},u=c(r);for(var l in e)if(u?void 0!==r.style[l]:void 0!==r[l]){var h=parseFloat(u?f(r,l):r[l]);i[l]=h,o[l]=s(h,e[l])}else o[l]=e[l];var v=new m(r,n,i,o,u);a.push(v)}),1==a.length?a[0]:a},kill:function(t,n){var e=o(t),i=P.length;r(e,function(t,r){for(var e=i-1;e>=0;e--){var a=P[e];a.target===r&&a.kill(n)}})},killAll:function(t){if(!t)return void(P=[]);for(var n=P.length,r=n-1;r>=0;r--){var e=P[r];e.kill(t)}},play:function(t){p(t,"play")},playAll:function(){d("play")},pause:function(t){p(t,"pause")},pauseAll:function(){d("pause")},restart:function(t){p(t,"restart")},restartAll:function(){d("restart")},reverse:function(t){p(t,"reverse")},reverseAll:function(){d("reverse")}}),w(n,{Linear:{None:function(t){return t}},Quad:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quart:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quint:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sine:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Expo:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circ:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var n,r=.1,e=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,n=e/4):n=e*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/e)))},Out:function(t){var n,r=.1,e=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,n=e/4):n=e*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin(2*(t-n)*Math.PI/e)+1)},InOut:function(t){var n,r=.1,e=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,n=e/4):n=e*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/e):r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-n)*Math.PI/e)*.5+1)}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?.5*t*t*((n+1)*t-n):.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-TWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*TWEEN.Easing.Bounce.In(2*t):.5*TWEEN.Easing.Bounce.Out(2*t-1)+.5}}}),n});
